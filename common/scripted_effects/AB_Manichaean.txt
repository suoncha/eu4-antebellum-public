## scope = { country }
# This checks which parts of the Mission Tree are completed and sets
# a flag corresponding to it 
ab_persia_check_completed_missions = {
	ab_check_persian_mission = { mission = mongoltactic }
	ab_check_persian_mission = { mission = cataphracts }
	ab_check_persian_mission = { mission = elephants }
	ab_check_persian_mission = { mission = immortals }
	ab_check_persian_mission = { mission = march }
	ab_check_persian_mission = { mission = avenge }
	ab_check_persian_mission = { mission = terminus }
	ab_check_persian_mission = { mission = arab_outpost }
	ab_check_persian_mission = { mission = aden }
	ab_check_persian_mission = { mission = south_africa }
	ab_check_persian_mission = { mission = unknown }
	ab_check_persian_mission = { mission = persian_court }
	ab_check_persian_mission = { mission = gondeshapur }
	ab_check_persian_mission = { mission = army }
	ab_check_persian_mission = { mission = divided }
	ab_check_persian_mission = { mission = ilkhanate }
	ab_check_persian_mission = { mission = georgia }
	ab_check_persian_mission = { mission = seljuks }
	ab_check_persian_mission = { mission = persianize }
	ab_check_persian_mission = { mission = levantine }
	ab_check_persian_mission = { mission = jerusalem }
	ab_check_persian_mission = { mission = agiptus }
	ab_check_persian_mission = { mission = african_bases }
	ab_check_persian_mission = { mission = military_doctrine }
	ab_check_persian_mission = { mission = gunpowder_empire }
	ab_check_persian_mission = { mission = persian_renaissance }
	ab_check_persian_mission = { mission = educate_masses }
	ab_check_persian_mission = { mission = patronize }
	ab_check_persian_mission = { mission = government_modern }
	ab_check_persian_mission = { mission = princes }
	ab_check_persian_mission = { mission = maragheh }
	ab_check_persian_mission = { mission = mesopotamia }
	ab_check_persian_mission = { mission = ctesiphon }
	ab_check_persian_mission = { mission = nahrawan }
	ab_check_persian_mission = { mission = indus }
	ab_check_persian_mission = { mission = windia }
	ab_check_persian_mission = { mission = arabia } 
	ab_check_persian_mission = { mission = fortify_hormuz }
	ab_check_persian_mission = { mission = maintain }
	ab_check_persian_mission = { mission = never }
	ab_check_persian_mission = { mission = mountain_expansion }
	ab_check_persian_mission = { mission = recover_meshan }
	ab_check_persian_mission = { mission = iran }
	ab_check_persian_mission = { mission = consolidate }
	ab_check_persian_mission = { mission = seat }
	ab_check_persian_mission = { mission = turkmen }
	ab_check_persian_mission = { mission = kushan }
	ab_check_persian_mission = { mission = gangetic }
	ab_check_persian_mission = { mission = integrate }
	ab_check_persian_mission = { mission = architecture }
	ab_check_persian_mission = { mission = eternal_flame }
	ab_check_persian_mission = { mission = sabzevar }
	ab_check_persian_mission = { mission = diaspora }
	ab_check_persian_mission = { mission = baku }
	ab_check_persian_mission = { mission = bridging }
	ab_check_persian_mission = { mission = textile_industry }
	ab_check_persian_mission = { mission = industrial }
	ab_check_persian_mission = { mission = secure_gulf }
	ab_check_persian_mission = { mission = monopolize }
	ab_check_persian_mission = { mission = gerrha }
	ab_check_persian_mission = { mission = mazun }
	ab_check_persian_mission = { mission = tribes }
	ab_check_persian_mission = { mission = silk }
	ab_check_persian_mission = { mission = dragon }
	ab_check_persian_mission = { mission = china_trade }
	ab_check_persian_mission = { mission = spice }
	ab_check_persian_mission = { mission = bengal }
	ab_check_persian_mission = { mission = hindustan }
	ab_check_persian_mission = { mission = mobeds }
	ab_check_persian_mission = { mission = insurrection }
	ab_check_persian_mission = { mission = silk_bazaar }
}

ab_persia_complete_checked_missions = {
	ab_complete_persian_mission = { mission = mongoltactic }
	ab_complete_persian_mission = { mission = cataphracts }
	ab_complete_persian_mission = { mission = elephants }
	ab_complete_persian_mission = { mission = immortals }
	ab_complete_persian_mission = { mission = march }
	ab_complete_persian_mission = { mission = avenge }
	ab_complete_persian_mission = { mission = terminus }
	ab_complete_persian_mission = { mission = arab_outpost }
	ab_complete_persian_mission = { mission = aden }
	ab_complete_persian_mission = { mission = south_africa }
	ab_complete_persian_mission = { mission = unknown }
	ab_complete_persian_mission = { mission = persian_court }
	ab_complete_persian_mission = { mission = gondeshapur }
	ab_complete_persian_mission = { mission = army }
	ab_complete_persian_mission = { mission = divided }
	ab_complete_persian_mission = { mission = ilkhanate }
	ab_complete_persian_mission = { mission = georgia }
	ab_complete_persian_mission = { mission = seljuks }
	ab_complete_persian_mission = { mission = persianize }
	ab_complete_persian_mission = { mission = levantine }
	ab_complete_persian_mission = { mission = jerusalem }
	ab_complete_persian_mission = { mission = agiptus }
	ab_complete_persian_mission = { mission = african_bases }
	ab_complete_persian_mission = { mission = military_doctrine }
	ab_complete_persian_mission = { mission = gunpowder_empire }
	ab_complete_persian_mission = { mission = persian_renaissance }
	ab_complete_persian_mission = { mission = educate_masses }
	ab_complete_persian_mission = { mission = patronize }
	ab_complete_persian_mission = { mission = government_modern }
	ab_complete_persian_mission = { mission = princes }
	ab_complete_persian_mission = { mission = maragheh }
	ab_complete_persian_mission = { mission = mesopotamia }
	ab_complete_persian_mission = { mission = ctesiphon }
	ab_complete_persian_mission = { mission = nahrawan }
	ab_complete_persian_mission = { mission = indus }
	ab_complete_persian_mission = { mission = windia }
	ab_complete_persian_mission = { mission = arabia } 
	ab_complete_persian_mission = { mission = fortify_hormuz }
	ab_complete_persian_mission = { mission = maintain }
	ab_complete_persian_mission = { mission = never }
	ab_complete_persian_mission = { mission = mountain_expansion }
	ab_complete_persian_mission = { mission = recover_meshan }
	ab_complete_persian_mission = { mission = iran }
	ab_complete_persian_mission = { mission = consolidate }
	ab_complete_persian_mission = { mission = seat }
	ab_complete_persian_mission = { mission = turkmen }
	ab_complete_persian_mission = { mission = kushan }
	ab_complete_persian_mission = { mission = gangetic }
	ab_complete_persian_mission = { mission = integrate }
	ab_complete_persian_mission = { mission = architecture }
	ab_complete_persian_mission = { mission = eternal_flame }
	ab_complete_persian_mission = { mission = sabzevar }
	ab_complete_persian_mission = { mission = diaspora }
	ab_complete_persian_mission = { mission = baku }
	ab_complete_persian_mission = { mission = bridging }
	ab_complete_persian_mission = { mission = textile_industry }
	ab_complete_persian_mission = { mission = industrial }
	ab_complete_persian_mission = { mission = secure_gulf }
	ab_complete_persian_mission = { mission = monopolize }
	ab_complete_persian_mission = { mission = gerrha }
	ab_complete_persian_mission = { mission = mazun }
	ab_complete_persian_mission = { mission = tribes }
	ab_complete_persian_mission = { mission = silk }
	ab_complete_persian_mission = { mission = dragon }
	ab_complete_persian_mission = { mission = china_trade }
	ab_complete_persian_mission = { mission = spice }
	ab_complete_persian_mission = { mission = bengal }
	ab_complete_persian_mission = { mission = hindustan }
	ab_complete_persian_mission = { mission = mobeds }
	ab_complete_persian_mission = { mission = insurrection }
	ab_complete_persian_mission = { mission = silk_bazaar }
}

ab_check_persian_mission = {
	if = {
		limit = {
			OR = {
				mission_completed = per_$mission$ # Zoroastrian
				mission_completed = perc_$mission$ # Nestorian
				mission_completed = perm_$mission$ # Sunni
				mission_completed = mper_$mission$ # Manichaean
			}
		}
		# Remember to remove this later
		set_country_flag = completed_$mission$
	}
}

ab_complete_persian_mission = {
	if = {
		limit = {
			has_country_flag = completed_$mission$
		}
		# Zoroastrian
		complete_mission = per_$mission$
		# Nestorian
		complete_mission = perc_$mission$
		# Sunni
		complete_mission = perm_$mission$
		# Manichaean
		complete_mission = mper_$mission$
		clr_country_flag = completed_$mission$
	}
}

ab_persia_revert_to_starting_prince_color = {
	set_country_flag = has_reverted_to_starting_tag_color_flag_PER
	set_country_flag = has_reverted_to_starting_tag_color_flag_PRC
	set_country_flag = has_reverted_to_starting_tag_color_flag_PRZ
	set_country_flag = has_reverted_to_starting_tag_color_flag_PMN
	if = { 
		limit = { was_tag = SSN }
		change_country_color = { 
			color = { 75 36 101 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KRN }
		change_country_color = { 
			color = { 31 69 110 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SHP }
		change_country_color = { 
			color = { 132 11 46 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ZKD }
		change_country_color = { 
			color = { 242 231 185 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = ISP }
		change_country_color = { 
			color = { 0 98 157 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = INJ }
		change_country_color = { 
			color = { 248 249 9 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MRH }
		change_country_color = { 
			color = { 9 88 93 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = MRV }
		change_country_color = { 
			color = { 202 0 0 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = SRN }
		change_country_color = { 
			color = { 239 201 144 }
		}
		set_country_flag = has_overriden_color_flag
	}
	if = { 
		limit = { was_tag = KYN }
		change_country_color = { 
			color = { 244 196 80 }
		}
		set_country_flag = has_overriden_color_flag
	}
}