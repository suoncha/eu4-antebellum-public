hlv_first_switzerland = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HLV
				NOT = { was_tag = CCR }
			}
			tag = SWI
			tag = GNV
		}
	}
	has_country_shield = yes

	hlv_integrate_chur = {
		icon = mission_chur
		required_missions = { emp_swi_start }
		position = 2

		provinces_to_highlight = {
			area = switzerland_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			switzerland_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			add_stability = 1
			switzerland_area = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			if = {
				limit = {
					OR = {
						is_rival = BAV
						is_rival = STY
						is_enemy = BAV
						is_enemy = STY
					}
				}
				custom_tooltip = HLV_RIVAL_FOR_TIROL
			}
			else = {
				custom_tooltip = HLV_RIVAL_FOR_TIROL_NO
			}
			hidden_effect = {
				if = {
					limit = {
						OR = {
							is_rival = BAV
							is_rival = STY
							is_enemy = BAV
							is_enemy = STY
						}
					}
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 300
						target = TIR
					}
				}
			}
		}
	}
}

hlv_first_chur = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HLV
				was_tag = CCR
			}
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_overthrow_switzerland = {
		icon = protect_against_austria
		required_missions = { emp_swi_start }
		position = 2

		provinces_to_highlight = {
			OR = {
				owned_by = SWI
				AND = {
					area = switzerland_area
					NOT = { country_or_non_sovereign_subject_holds = ROOT }
				}
			}
		}

		trigger = {
			switzerland_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { exists = SWI }
		}

		effect = {
			add_stability = 1
			switzerland_area = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			if = {
				limit = {
					OR = {
						is_rival = BAV
						is_rival = STY
					}
				}
				custom_tooltip = HLV_RIVAL_FOR_TIROL
			}
			else = {
				custom_tooltip = HLV_RIVAL_FOR_TIROL_NO
			}
			hidden_effect = {
				if = {
					limit = {
						OR = {
							is_rival = BAV
							is_rival = STY
						}
					}
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 300
						target = NAV
					}
				}
			}
		}
	}
}

hlv_first_locked = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_invade_locked = {
		icon = mission_locked_mission
		required_missions = { emp_swi_confederacy }
		position = 4
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_secure_alps_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_invade_locked }
		position = 6
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}
}

hlv_first_unlocked = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		tag = HLV
	}
	has_country_shield = yes

	hlv_invade = {
		icon = mission_conquer_north_italy
		required_missions = { emp_swi_confederacy }
		position = 4

		provinces_to_highlight = {
			area = lombardy_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 3
				area = lombardy_area
			}
		}

		effect = {
			add_country_modifier = {
				name = itl_thrust
				duration = 5475
			}
			lombardy_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			piedmont_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			po_valley_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = { owns = 104 }
				custom_tooltip = HLV_OWN_MILANO
			}
			else = {
				custom_tooltip = HLV_OWN_MILANO_NO
			}
			tooltip = {
				104 = {
					add_core = ROOT
					add_great_project_tier = {
						type = duomo_milano
						tier = 1
					}
				}
			}
			hidden_effect = {
				if = {
					limit = { owns = 104 }
					104 = {
						add_core = ROOT
						add_great_project_tier = {
							type = duomo_milano
							tier = 1
						}
					}
				}
			}
		}
	}

	hlv_secure_alps = {
		icon = the_alpine_wall
		required_missions = { hlv_invade }
		position = 6

		provinces_to_highlight = {
			OR = {
				area = lombardy_area
				area = piedmont_area
				area = po_valley_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 7
				OR = {
					area = lombardy_area
					area = piedmont_area
					area = po_valley_area
				}
			}
		}

		effect = {
			lombardy_area = {
				add_province_modifier = {
					name = hlv_italian_fortifications
					duration = -1
				}
			}
			piedmont_area = {
				add_province_modifier = {
					name = hlv_italian_fortifications
					duration = -1
				}
			}
			po_valley_area = {
				add_province_modifier = {
					name = hlv_italian_fortifications
					duration = -1
				}
			}
			if = {
				limit = {
					lombardy_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					piedmont_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
					po_valley_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
					}
				}
				custom_tooltip = HLV_OWN_NORTHERN_ITALY
			}
			else = {
				custom_tooltip = HLV_OWN_NORTHERN_ITALY_NO
			}
			tooltip = {
				liguria_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				venetia_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
				emilia_romagna_area = {
					limit = {
						NOT = { is_core = ROOT }
						NOT = { is_permanent_claim = ROOT }
					}
					add_permanent_claim = ROOT
				}
			}
			hidden_effect = {
				if = {
					limit = {
						lombardy_area = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
						}
						piedmont_area = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
						}
						po_valley_area = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
						}
					}
					liguria_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
					venetia_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
					emilia_romagna_area = {
						limit = {
							NOT = { is_core = ROOT }
							NOT = { is_permanent_claim = ROOT }
						}
						add_permanent_claim = ROOT
					}
				}
			}
		}
	}
}

hlv_first_merc = {
	slot = 1
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HLV
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	emp_swi_swiss_guard = {
		icon = expand_the_swiss_guard
		required_missions = { }
		position = 7

		provinces_to_highlight = {
			owned_by = PAP
		}

		trigger = {
			if = {
				limit = {
					exists = PAP
				}
				PAP = {
					has_opinion = { who = ROOT value = 100 }
				}
				OR = {
					is_in_war = {
						defenders = PAP
						defenders = ROOT
					}
					is_in_war = {
						attackers = PAP
						attackers = ROOT
					}
					custom_trigger_tooltip = { # see on_war_won on_action
						tooltip = hirde_to_pope_tt
						has_country_flag = hired_to_pope
					}
				}
			}
			else = {
				army_size_percentage = 1
			}
		}

		effect = {
			if = {
				limit = {
					religion = catholic 
				}
				add_papal_influence = 20
			}
			add_country_modifier = {
				name = "swi_expanded_papal_guard"
				duration = 7300
			}
		}
	}

	emp_swi_mercenaries = {
		icon = mercenary_companies
		required_missions = { emp_swi_swiss_guard }
		position = 9

		trigger = {
			if = {
				limit = {
					has_dlc = "Mare Nostrum"
				}
				OR = {
					AND = {
						num_of_hired_mercenary_companies = 3
						is_in_deficit = no
						is_bankrupt = no
					}
					custom_trigger_tooltip = {
						tooltip = swi_won_condottiere_war_tt
						has_country_flag = won_condottiere_war # see on_war_won on_action
					}
				}
			}
			else = {
				num_of_hired_mercenary_companies = 3
				is_in_deficit = no
				is_bankrupt = no
			}
		}

		effect = {
			unlock_merc_company = {
				merc_company = ab_merc_swiss_home_guards
			}
		}
	}
}

hlv_second = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HLV
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	emp_swi_start = {
		icon = consolidate_switzerland
		required_missions = { }
		position = 1
		
		trigger = {
			army_size_percentage = 0.9
			stability = 1
		}

		effect = {
			add_army_tradition = 20
			add_country_modifier = {
				name = hlv_unifier_alps
				duration = 3650
			}
			switzerland_area = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}
			romandie_area = {
				limit = {
					NOT = { is_core = ROOT }
				}
				add_core = ROOT
			}			
		}
	}

	hlv_vaud_fribourg = {
		icon = vaud_and_wallis
		required_missions = { emp_swi_start }
		position = 2

		provinces_to_highlight = {
			OR = {
				province_id = 1867
				province_id = 4721
			}
			NOT = {
				owned_by = ROOT
			}
		}

		trigger = {
			1867 = { owned_by = ROOT }
			4721 = { owned_by = ROOT }
		}

		effect = {
			add_years_of_income = 1
			1867 = { add_base_tax = 1 add_base_production = 1 add_base_manpower = 1 }
			4721 = { add_base_tax = 1 add_base_production = 1 add_base_manpower = 1 }
			if = {
				limit = {
					OR = {
						is_rival = UPB
						is_enemy = UPB
					}
				}
				custom_tooltip = HLV_RIVAL_UPPER_BURGUNDY
			}
			else = {
				custom_tooltip = HLV_RIVAL_UPPER_BURGUNDY_NO
			}
			hidden_effect = {
				if = {
					limit = {
						OR = {
							is_rival = UPB
							is_enemy = UPB
						}
					}
					add_casus_belli = {
						type = cb_vassalize_mission
						months = 300
						target = UPB
					}
				}
			}
		}
	}

	emp_swi_confederacy = {
		icon = reorganize_the_confederacy
		required_missions = { hlv_vaud_fribourg }
		position = 3

		provinces_to_highlight = {
			OR = {
				area = switzerland_area
				area = romandie_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			if = {
				limit = {
					OR = {
						tag = SWI
						was_tag = SWI
					}
				}
				mission_completed = hlv_integrate_chur
				mission_completed = emp_swi_geneva
				
			}
			else_if = {
				limit = {
					OR = {
						tag = CCR
						was_tag = CCR
					}
				}
				mission_completed = hlv_overthrow_switzerland
				mission_completed = emp_swi_geneva
			}
			else_if = {
				limit = {
					OR = {
						tag = GNV
						was_tag = GNV
					}
				}
				mission_completed = hlv_overthrow_switzerland_gnv
				mission_completed = hlv_integrate_chur
			}
			stability = 2
			if = {
				limit = {
					government = republic
				}
				republican_tradition = 90
			}
			switzerland_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			romandie_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			country_event = { id = ab_helvetia.1 }
			add_country_modifier = {
				name = "reorganzied_swiss_confederacy"
				duration = -1
			}
			custom_tooltip = SAX_CLAIM_NEIGHBOUR
			hidden_effect = {
				every_neighbor_province = {
					limit = {
						NOT = { owned_by = ROOT }
						NOT = { is_permanent_claim = ROOT	}
						NOT = { is_core = ROOT	}
					}
					add_permanent_claim = ROOT
				}
			}
		}
	}
}

hlv_second_locked = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_welf_locked = {
		icon = mission_locked_mission
		required_missions = { emp_swi_confederacy }
		position = 4
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_arelat_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_welf_locked }
		position = 6
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_domination_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_secure_alps_locked hlv_arelat_locked hlv_bavaria_locked }
		position = 7
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_professional_locked = {
		icon = mission_locked_mission
		required_missions = { emp_swi_swiss_guard }
		position = 8
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_militarization_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_professional_locked }
		position = 10
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}
}

hlv_second_unlocked = {
	slot = 2
	generic = no
	ai = yes
	potential = {
		tag = HLV
	}
	has_country_shield = yes

	hlv_welf = {
		icon = alpine_defenses
		required_missions = { emp_swi_confederacy }
		position = 4

		provinces_to_highlight = {
			OR = {
				area = bourgogne_area
				area = savoy_dauphine_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 4
				OR = {
					area = bourgogne_area
					area = savoy_dauphine_area
				}
			}
		}

		effect = {
			add_adm_power = 100
			add_country_modifier = {
				name = aqt_defeat_the_welf
				duration = 5475
			}
			bourgogne_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			west_burgundy_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			savoy_dauphine_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			provence_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hlv_arelat = {
		icon = unite_the_realm
		required_missions = { hlv_welf }
		position = 6

		provinces_to_highlight = {
			OR = {
				area = provence_area
				area = savoy_dauphine_area
				area = west_burgundy_area
				area = bourgogne_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}
		
		trigger = {
			provence_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			savoy_dauphine_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			west_burgundy_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			bourgogne_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}
		
		effect = {
			add_accepted_culture_or_dip_power = {
				culture = occitain
				dip_reward = yes
			}
			201 = {
				add_base_production = 2
				add_great_project_tier = {
					type = royal_palace_of_arles
					tier = 1
				}
				if = {
					limit = {
						has_trade_building_trigger = yes
					}
					upgrade_trade_building = yes
				}
				if = {
					limit = {
						has_shipyard_building_trigger = yes
					}
					upgrade_shipyard_building = yes
				}
				add_unit_construction = {
					type = galley
					amount = 10
					speed = 1
					cost = 0
				}
			}

			custom_tooltip = AB_EMPTY

			add_country_modifier = {
				name = lot_mediterranean
				duration = 7300
			}
		}
	}

	hlv_domination = {
		icon = end_the_habsburgs
		required_missions = { hlv_secure_alps hlv_arelat hlv_bavaria }
		position = 7

		provinces_to_highlight = {
			has_terrain = mountain
			owned_by = ROOT
			province_has_current_tech_fort_trigger = no
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				province_has_current_tech_fort_trigger = yes
				has_terrain = mountain
			}
			NOT = { great_power_rank = 4 }
		}
		
		effect = {
			custom_tooltip = HLV_PP
			hidden_effect = {
				add_power_projection = {
					type = HLV_perma_pp
					amount = 10
				}
			}
			custom_tooltip = AB_EMPTY
			custom_tooltip = HLV_RANDOM_TEN_PROVINCES
			hidden_effect = {		
                for = {
                    amount = 10
                    effect = "
                        random_owned_province = {
							limit = {
								has_fort_building_trigger = yes
							}
							add_base_manpower = 1
                        }
                    "
                }
			}
		}
	}

	hlv_professional = {
		icon = form_the_swiss_guard
		required_missions = { emp_swi_swiss_guard }
		position = 8

		trigger = {
			army_professionalism = 0.2
			has_government_power = {
				mechanic_type = helvetic_militarization_mechanic
				power_type = helvetic_militarization
				value = 25
			}
		}
		
		effect = {
			add_army_professionalism = 0.05
			add_country_modifier = {
				name = hlv_professional_mercs
				duration = 18250
			}
			if = {
				limit = { full_idea_group = mercenary_ideas }
				custom_tooltip = HLV_PROFESSIONAL_MERC_IDEAS
			}
			else = {
				custom_tooltip = HLV_PROFESSIONAL_MERC_IDEAS_NO
			}
			tooltip = {
				add_country_modifier = {
					name = hlv_guards_of_helvetia
					duration = -1
				}
			}
			hidden_effect = {
				if = {
					limit = { full_idea_group = mercenary_ideas }
					add_country_modifier = {
						name = hlv_guards_of_helvetia
						duration = -1
					}
				}
			}
		}
	}

	hlv_militarization = {
		icon = swiss_mercenaries
		required_missions = { hlv_professional }
		position = 10

		trigger = {
			num_of_mercenaries = 50
			army_professionalism = 0.5
			has_government_power = {
				mechanic_type = helvetic_militarization_mechanic
				power_type = helvetic_militarization
				value = 50
			}
		}
		
		effect = {
			add_army_tradition = 20
			add_country_modifier = {
				name = hlv_mass_militarization
				duration = -1
			}
			if = {
				limit = { full_idea_group = defensive_ideas }
				custom_tooltip = HLV_MILITARIZATION_IDEAS
			}
			else = {
				custom_tooltip = HLV_MILITARIZATION_IDEAS_NO
			}
			tooltip = {
				add_country_modifier = {
					name = hlv_children_of_alps
					duration = -1
				}
			}
			custom_tooltip = HLV_CHILDREN_OF_ALPS_BONUS
			hidden_effect = {
				if = {
					limit = { full_idea_group = defensive_ideas }
					add_country_modifier = {
						name = hlv_children_of_alps
						duration = -1
					}
				}
			}
		}
	}
}

hlv_third_switzerland = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HLV
				NOT = { was_tag = GNV }
			}
			tag = SWI
			tag = CCR
		}
	}
	has_country_shield = yes

	emp_swi_geneva = {
		icon = sway_geneva
		required_missions = { emp_swi_start }
		position = 2

		provinces_to_highlight = {
			province_id = 4720
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			OR = {
				4720 = { country_or_non_sovereign_subject_holds = ROOT }
				GNV = {
					is_at_war = no
					NOT = { is_subject_of = ROOT }
					has_opinion = { who = ROOT value = 100 }
					NOT = { num_of_cities = 2 }
				}
			}
		}

		effect = {
			add_dip_power = 50
			if = {
				limit = {
					NOT = { owns = 4720 }
					GNV = {
						NOT = { is_subject_of = ROOT }
					}
				}
				custom_tooltip = swi_geneva_mission_tt
				country_event = { id = emp_mission_events.2 }		
			}
			else_if = {
				limit = {
					GNV = {
						is_subject = yes
						is_at_war = no
						NOT = { is_subject_of = ROOT }
						NOT = { num_of_cities = 2 }
						has_opinion = { who = ROOT value = 100 }
					}
				}
				GNV = {
					add_liberty_desire = 100
					overlord = {
						country_event = { id = emp_mission_events.4 }
					}
				}
				support_independence_of = GNV
			}
			else = {
				add_mil_power = 50
			}
			custom_tooltip = AB_EMPTY
			define_advisor = {
				type = trader
				skill = 1
				religion = ROOT
				culture = ROOT
				cost_multiplier = 0.5
			}
			4720 = {
				if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
					center_of_trade = 1
				}
				else_if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
					add_center_of_trade_level = 1
				}
			}
		}
	}
}

hlv_third_geneva = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			AND = {
				tag = HLV
				was_tag = GNV
			}
			tag = GNV
		}
	}
	has_country_shield = yes

	hlv_overthrow_switzerland_gnv = {
		icon = protect_against_austria
		required_missions = { emp_swi_start }
		position = 2

		provinces_to_highlight = {
			owned_by = SWI
		}

		trigger = {
			romandie_area = {
			    type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
			NOT = { exists = SWI }
		}

		effect = {
			add_mil_power = 100
			romandie_area = {
				add_base_tax = 1
				add_base_production = 1
				add_base_manpower = 1
			}
			custom_tooltip = AB_EMPTY
			define_advisor = {
				type = trader
				skill = 1
				religion = ROOT
				culture = ROOT
				cost_multiplier = 0.5
			}
			4720 = {
				if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
					center_of_trade = 1
				}
				else_if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
					add_center_of_trade_level = 1
				}
			}
		}
	}
}

hlv_third_locked = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_tirol_locked = {
		icon = mission_locked_mission
		required_missions = { emp_swi_confederacy }
		position = 4
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_bavaria_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_tirol_locked }
		position = 6
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}
}

hlv_third_unlocked = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = HLV
	}
	has_country_shield = yes

	hlv_tirol = {
		icon = claim_tirol
		required_missions = { emp_swi_confederacy }
		position = 4

		provinces_to_highlight = {
			area = tirol_area
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			tirol_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
			}
		}

		effect = {
			tirol_area = {
				change_culture = ROOT
			}
			73 = {
				add_great_project_tier = {
					type = ambras_castle
					tier = 1
				}
			}
			upper_bavaria_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lower_bavaria_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hlv_bavaria = {
		icon = duchy_of_bavaria
		required_missions = { hlv_tirol }
		position = 6

		provinces_to_highlight = {
			OR = {
				area = upper_bavaria_area
				area = lower_bavaria_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 5
				OR = {
					area = upper_bavaria_area
					area = lower_bavaria_area
				}
			}
			NOT = { exists = BAV }
		}

		effect = {
			south_german_region = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_nationalism = -10
			}
			south_german_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			if = {
				limit = {
					BAV = {
						humiliated_by = ROOT
					}
				}
				custom_tooltip = HLV_HUMILIATED_BAVARIA
			}
			else = {
				custom_tooltip = HLV_HUMILIATED_BAVARIA_NO
			}
			hidden_effect = {
				if = {
					limit = {
						BAV = {
							humiliated_by = ROOT
						}
					}
					every_province = {
						limit = { is_core = BAV }
						remove_core = BAV
					}
				}
			}
		}
	}
}

hlv_third_tall = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HLV
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_capital = {
		icon = mission_the_governing_senate
		required_missions = { }
		position = 7
		
		trigger = {
			capital_scope = {
				development = 30
			}
		}
		
		provinces_to_highlight = {
			is_capital_of = ROOT
		}
		
		effect = {
			capital_scope = {
				add_province_modifier = {
					name = lot_seat_of_power
					duration = -1
				}
			}
			capital_scope = {
				if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
					center_of_trade = 1
				}
				else_if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
					add_center_of_trade_level = 1
				}
			}
		}
	}

	hlv_mountain_expansion = {
	    icon = mission_che_the_cave_country
		required_missions = { hlv_capital }
		position = 9
		
		provinces_to_highlight = {
			OR = {
				area = switzerland_area
				area = romandie_area
			}
			NOT = {
				num_of_times_improved = 5
			}
			OR = {
				has_terrain = mountain
				has_terrain = hills
			}
			owned_by = ROOT
		}
		
		trigger = {
			num_of_owned_provinces_with = {
				value = 5
				OR = {
					area = switzerland_area
					area = romandie_area
				}
				OR = {
					has_terrain = mountain
					has_terrain = hills
				}
				num_of_times_improved = 5
			}
		}
		
		effect = {
			unlock_estate_privilege = {
				estate_privilege = estate_burghers_hlv_mountain_expansion
			}
		}
	}
}

hlv_third_tall_locked = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_coprosperity_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_mountain_expansion }
		position = 11
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}
}

hlv_third_tall_unlocked = {
	slot = 3
	generic = no
	ai = yes
	potential = {
		tag = HLV
	}
	has_country_shield = yes

	hlv_coprosperity = {
		icon = reclaim_the_ducal_lands
		required_missions = { hlv_mountain_expansion }
		position = 11
		
		provinces_to_highlight = {
			OR = {
				area = romandie_area
				area = switzerland_area
			}
			OR = {
				NOT = { country_or_non_sovereign_subject_holds = ROOT }
				NOT = { development = 20 }
			}
		}

		trigger = {
			romandie_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				development = 20
			}
			switzerland_area = {
				type = all
				country_or_non_sovereign_subject_holds = ROOT
				development = 20
			}
		}
				
		effect = {
			romandie_area = {
				add_province_modifier = {
					name = hlv_alpine_prosperity
					duration = -1
				}
			}
			switzerland_area = {
				add_province_modifier = {
					name = hlv_alpine_prosperity
					duration = -1
				}
			}
			if = {
				limit = {
					tirol_area = {
						type = all
						country_or_non_sovereign_subject_holds = ROOT
						development = 20
					}
				}
				custom_tooltip = HLV_DEVELOP_TIROL_BONUS
			}
			else = {
				custom_tooltip = HLV_DEVELOP_TIROL_BONUS_NO
			}
			hidden_effect = {
				if = {
					limit = {
						tirol_area = {
							type = all
							country_or_non_sovereign_subject_holds = ROOT
							development = 20
						}
					}
					tirol_area = {
						add_province_modifier = {
							name = hlv_alpine_prosperity
							duration = -1
						}
					}
				}
			}
		}
	}
}

hlv_fourth = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HLV
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	emp_swi_swabia = {
		icon = expand_the_confederacy
		required_missions = { }
		position = 1

		provinces_to_highlight = {
			OR = {
				area = lower_swabia_area
				area = upper_swabia_area
				area = alsace_area
				area = upper_rhineland_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				OR = {
					area = lower_swabia_area
					area = upper_swabia_area
					area = alsace_area
					area = upper_rhineland_area
				}
			}
		}

		effect = {
			custom_tooltip = BRA_AE
			add_country_modifier = {
				name = "swi_swabia_joins_the_confederacy"
				duration = 7300
			}
			hidden_effect = {
				every_country = {
					limit = {
						is_part_of_hre = yes
					}
					add_aggressive_expansion = {
						who = ROOT
						value = -10
						apply_calc = no
					}
				}
			}
			palatinate_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			franconia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			upper_franconia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}
}

hlv_fourth_locked = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_franconia_locked = {
		icon = mission_locked_mission
		required_missions = { emp_swi_swabia } 
		position = 3
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_rhine_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_franconia_locked } 
		position = 4
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_westphalia_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_rhine_locked } 
		position = 5
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}

	hlv_claim_our_destiny_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_bavaria_locked hlv_westphalia_locked } 
		position = 7
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}
}

hlv_fourth_unlocked = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = HLV
	}
	has_country_shield = yes

	hlv_franconia = {
		icon = conquer_franconia
		required_missions = { emp_swi_swabia }
		position = 3

		provinces_to_highlight = {
			OR = {
				area = palatinate_area
				area = franconia_area
				area = upper_franconia_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 6
				OR = {
					area = palatinate_area
					area = franconia_area
					area = upper_franconia_area
				}
			}
		}

		effect = {
			add_prestige_or_monarch_power = { amount = 25 } 
			add_country_modifier = {
				name = hlv_subjugate_franconians
				duration = 7300
			}
			hesse_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			north_rhine_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			lower_rhineland_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hlv_rhine = {
		icon = rhineland_conquest
		required_missions = { hlv_franconia }
		position = 4

		provinces_to_highlight = {
			OR = {
				area = hesse_area
				area = north_rhine_area
				area = lower_rhineland_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 8
				OR = {
					area = hesse_area
					area = north_rhine_area
					area = lower_rhineland_area
				}
			}
		}

		effect = {
			add_years_of_owned_provinces_production_income = {
				years = 0.5
				trigger = {
					has_production_building_trigger = yes
				}
				custom_tooltip = INCOME_FROM_WORKSHOPS_DESC
			}
			add_country_modifier = {
				name = lom_industrial_economys
				duration = 5475
			}
			westphalia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			north_westphalia_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			braunschweig_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
			weser_area = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hlv_westphalia = {
		icon = westphalian_conquest
		required_missions = { hlv_rhine }
		position = 5

		provinces_to_highlight = {
			OR = {
				area = westphalia_area
				area = north_westphalia_area
				area = lower_rhineland_area
				area = weser_area
			}
			NOT = { country_or_non_sovereign_subject_holds = ROOT }
		}

		trigger = {
			num_of_provinces_owned_or_owned_by_non_sovereign_subjects_with = {
				value = 10
				OR = {
					area = westphalia_area
					area = north_westphalia_area
					area = lower_rhineland_area
					area = weser_area
				}
			}
		}

		effect = {
			north_german_region = {
				limit = {
					country_or_non_sovereign_subject_holds = ROOT
				}
				add_local_autonomy = -25
			}
			add_country_modifier = {
				name = hlv_war_germany
				duration = 9125
			}
			north_german_region = {
				limit = {
					NOT = { is_core = ROOT }
					NOT = { is_permanent_claim = ROOT }
				}
				add_permanent_claim = ROOT
			}
		}
	}

	hlv_claim_our_destiny = {
		icon = mission_bloodiron
		required_missions = { hlv_bavaria hlv_westphalia }
		position = 7
		
		trigger = {
			custom_trigger_tooltip = {
				tooltip = SAX_ALL_GERMANY
				owns_core_province = 57
				owns_core_province = 65
				owns_core_province = 67
				owns_core_province = 85
				owns_core_province = 63
				owns_core_province = 1876
				owns_core_province = 70
				owns_core_province = 1874
			}
		}
	
		provinces_to_highlight = {
			OR = {
				province_id = 57
				province_id = 65
				province_id = 67
				province_id = 85
				province_id = 63
				province_id = 1876
				province_id = 70
				province_id = 1874
			}
			NOT = { owned_by = ROOT }	
		}
		
		effect = {
			change_monarch_points_or_power = {
				points = 2
				power = mil
			}
			add_country_modifier = {
				name = sax_unifier_of_germany
				duration = 7300
			}
			custom_tooltip = SAX_ELECTOR_CB
			hidden_effect = {
				every_elector = {
					reverse_add_casus_belli = {
						target = ROOT
						type = cb_vassalize_mission
						months = 300
					}
				}
			}
		}
	}
}

hlv_fourth_tall = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HLV
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_road = {
		icon = mission_expand_into_the_forest 
		required_missions = { } 
		position = 8

		provinces_to_highlight = {
			owned_by = ROOT
			NOT = {
				has_road_building_trigger = yes
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				has_road_building_trigger = yes
			}
		}
		
		effect = { 
			add_country_modifier = {
				name = hlv_connect
				duration = 7300
			}
			define_advisor = {
				type = architect
				skill = 2
				religion = ROOT
				culture = ROOT
				cost_multiplier = 0.5
			}
		}
	}
}

hlv_fourth_tall_locked = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_bank_locked = {
		icon = mission_locked_mission
		required_missions = { hlv_mountain_expansion hlv_road emp_swi_mountain_forts } 
		position = 10
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}
}

hlv_fourth_tall_unlocked = {
	slot = 4
	generic = no
	ai = yes
	potential = {
		tag = HLV
	}
	has_country_shield = yes

	hlv_bank = {
		icon = mission_rb_the_bank_of_scotland 
		required_missions = { hlv_mountain_expansion hlv_road emp_swi_mountain_forts } 
		position = 10

		provinces_to_highlight = {
			province_id = 1869
		}

		trigger = {
			owns_core_province = 1869
			1869 = {
				development = 35
			}
			1869 = {
				has_tax_building_trigger = yes
			}
			1869 = {
				has_production_building_trigger = yes
			}
			1869 = {
				has_trade_building_trigger = yes
			}
			1869 = {
				has_courthouse_building_trigger = yes
			}
			1869 = {
				has_building = state_house
			}
			full_idea_group = economic_ideas
		}
		
		effect = {
			add_country_modifier = {
				name = hlv_bank_europe
				duration = -1
			}
			1869 = {
				change_trade_goods = gold
				add_province_modifier = {
					name = hlv_bank_zurich
					duration = -1
				}
			}
			1869 = {
				if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 1 }
					}
					center_of_trade = 1
				}
				else_if = {
					limit = {
						NOT = { province_has_center_of_trade_of_level = 3 }
					}
					add_center_of_trade_level = 1
				}
			}
		}
	}
}

hlv_fifth = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = HLV
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_church = {
		icon = mission_european_church
		required_missions = { }
		position = 1

		provinces_to_highlight = {
			owned_by = ROOT
			NOT = {
				has_tax_building_trigger = yes
			}
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 10
				has_tax_building_trigger = yes
			}
		}

		effect = {
			add_estate_loyalty = {
				estate = estate_church
				loyalty = 20
			}
			custom_tooltip = ARS_TAX_BUILDING
			hidden_effect = {
				for = {
					amount = 5
					effect = "
						random_owned_province = {
							limit = {
								has_tax_building_trigger = yes
							}
							add_base_tax = 1
						}
					"
				}
			}
		}
	}

	emp_swi_reformation = {
		icon = join_the_reformation
		required_missions = { hlv_church }
		position = 3

		trigger = {
			OR = {
				religion = reformed
				religion = protestant
				religion = hussite
				council_position = concilatory
				council_position = harsh
			}
		}

		effect = {
			add_dip_power = 50
			define_advisor = {
				type = theologian
				skill = 3
				religion = ROOT
				culture = ROOT
				cost_multiplier = 0.25
			}
			if = {
				limit = {
					religion_group = christian
					NOT = { religion = catholic }
				}
				custom_tooltip = HLV_SAUSAGE_EATER
				hidden_effect = {
					every_neighbor_country = {
						limit = {
							religion = catholic
						}
						add_opinion = {
							who = ROOT
							modifier = opinion_sausage_eaters
						}
					}
				}
			}
		}
	}

	emp_swi_convert = {
		icon = religious_resolution
		required_missions = { emp_swi_reformation }
		position = 5

		provinces_to_highlight = {
			owned_by = ROOT
			NOT = { religion = ROOT }
		}

		trigger = {
			religious_unity = 1
		}

		effect = {
			if = {	
				limit = {
					religion = reformed
					has_dlc = "Wealth of Nations"
				}
				add_fervor = 100
			}
			else_if = {
				limit = {
					religion = protestant
					has_dlc = "Common Sense"
				}
				add_church_power = 100
			}
			else_if = {
				limit = {
					religion = catholic
				}
				add_papal_influence = 50
			}
			else = {
				add_dip_power = 50
			}
			if = {
				limit = {
					religion_group = christian
				}
				custom_tooltip = HLV_RELIGIOUS_RESOLUTION
				hidden_effect = {
					every_country = {
						limit = {
							religion_group = ROOT
							capital_scope = {
								continent = europe
							}
						}
						if = {
							limit = {
								THIS = {
									religion = ROOT
								}
							}
							add_opinion = {
								who = ROOT
								modifier = opinion_hlv_resolution_same
							}
						}
						else = {
							add_opinion = {
								who = ROOT
								modifier = opinion_hlv_resolution_heretic
							}
						}
					}
				}
			}
			if = {
				limit = {
					num_of_owned_provinces_with = {
						value = 5
						NOT = { religion = ROOT }
						religion_group = ROOT
					}
				}
				custom_tooltip = HLV_OWN_HERETIC_PROVINCES
			}
			else = {
				custom_tooltip = HLV_OWN_HERETIC_PROVINCES_NO
			}
			hidden_effect = {
				if = {
					limit = {
						num_of_owned_provinces_with = {
							value = 5
							NOT = { religion = ROOT }
							religion_group = ROOT
						}
					}
					for = {
						amount = 5
						effect = "
							random_owned_province = {
								limit = {
									NOT = { religion = ROOT }
									religion_group = ROOT
								}
								add_base_tax = 1
							}
						"
					}
				}
			}
		}
	}

	emp_swi_evangelize = {
		icon = evengelize_the_faith
		required_missions = { emp_swi_convert }
		position = 7

		provinces_to_highlight = {
			province_id = 4720
		}

		trigger = {
			owns_core_province = 4720
			4720 = { religion = ROOT }
			if = {
				limit = {
					OR = {
						religion = protestant
						religion = reformed
					}
				}
				calc_true_if = {
					desc = swi_12_reformer_countries
					all_known_country = {
						OR = {
							religion = protestant
							religion = reformed
						}
						capital_scope = {
							continent = europe
						}
					}
					amount = 12
				}
			}
			else_if = {
				limit = {
					religion = catholic
				}
				calc_true_if = {
					desc = swi_20_catholic_countries
					all_known_country = {
						religion = catholic
						capital_scope = {
							continent = europe
						}
					}
					amount = 20
				}
			}
			OR = {
				full_idea_group = humanist_ideas
				custom_trigger_tooltip = {
					tooltip = obj_force_converted_tooltip
					has_country_flag = force_converted
				}
			}
		}
		
		effect = {
			if = {
				limit = {
					OR = {
						religion = reformed
						religion = protestant
					}
				}
				country_event = { id = emp_mission_events.3 }
			}
			4720 = {
				add_base_tax = 2
				add_base_production = 2
				add_base_manpower = 2
				add_province_modifier = {
					name = hlv_geneva
					duration = -1
				}
			}
		}
	}

	emp_swi_mountain_forts = {
		icon = fortress_switzerland
		required_missions = { }
		position = 9

		provinces_to_highlight = {
			has_terrain = mountain
			owned_by = ROOT
			NOT = { fort_level = 3 }
		}

		trigger = {
			num_of_owned_provinces_with = {
				value = 3
				has_building = ramparts
				has_terrain = mountain
			}
		}

		effect = {
			add_country_modifier = {
				name = "swiss_mountains_modifier"
				duration = -1
			}
			custom_tooltip = HLV_FREE_FORT_UPGRADE
			hidden_effect = {
				for = {
					amount = 3
					effect = "
						random_owned_province = {
							limit = {
								has_fort_building_trigger = yes
							}
							upgrade_fort_building = yes
						}
					"
				}
			}
		}
	}
}

hlv_fifth_locked = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		OR = {
			tag = SWI
			tag = GNV
			tag = CCR
		}
	}
	has_country_shield = yes

	hlv_unconquerable_locked = {
		icon = mission_locked_mission
		required_missions = { emp_swi_mountain_forts } 
		position = 11
	
		trigger = {
			custom_trigger_tooltip = {
				tooltip = HLV_UNLOCKABLE
				has_country_flag = crn_you_cant_get_this
			}
		}
		
		effect = {
			custom_tooltip = HLV_UNLOCKABLE
		}
	}
}

hlv_fifth_unlocked = {
	slot = 5
	generic = no
	ai = yes
	potential = {
		tag = HLV
	}
	has_country_shield = yes

	hlv_unconquerable = {
		icon = fortify_the_passes
		required_missions = { emp_swi_mountain_forts }
		position = 11

		provinces_to_highlight = {
			owned_by = ROOT
			OR = {
				NOT = { base_manpower = 5 }
				province_has_current_tech_fort_trigger = no
			}
			OR = {
				AND = {
					area = romandie_area
					NOT = {
						area_for_scope_province = {
							base_manpower = 5
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
				AND = {
					area = switzerland_area
					NOT = {
						area_for_scope_province = {
							base_manpower = 5
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
				AND = {
					area = savoy_dauphine_area
					NOT = {
						area_for_scope_province = {
							base_manpower = 5
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
				AND = {
					area = piedmont_area
					NOT = {
						area_for_scope_province = {
							base_manpower = 5
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
				AND = {
					area = lombardy_area
					NOT = {
						area_for_scope_province = {
							base_manpower = 5
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
				AND = {
					area = po_valley_area
					NOT = {
						area_for_scope_province = {
							base_manpower = 5
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
				AND = {
					area = tirol_area
					NOT = {
						area_for_scope_province = {
							base_manpower = 5
							province_has_current_tech_fort_trigger = yes
						}
					}
				}
			}
		}
		
		trigger = {
			any_owned_province = {
				area = romandie_area
				province_has_current_tech_fort_trigger = yes
				base_manpower = 5
			}
			any_owned_province = {
				area = switzerland_area
				province_has_current_tech_fort_trigger = yes
				base_manpower = 5
			}
			any_owned_province = {
				area = savoy_dauphine_area
				province_has_current_tech_fort_trigger = yes
				base_manpower = 5
			}
			any_owned_province = {
				area = piedmont_area
				province_has_current_tech_fort_trigger = yes
				base_manpower = 5
			}
			any_owned_province = {
				area = lombardy_area
				province_has_current_tech_fort_trigger = yes
				base_manpower = 5
			}
			any_owned_province = {
				area = po_valley_area
				province_has_current_tech_fort_trigger = yes
				base_manpower = 5
			}
			any_owned_province = {
				area = tirol_area
				province_has_current_tech_fort_trigger = yes
				base_manpower = 5
			}
		}

		effect = {
			add_country_modifier = {
				name = hlv_mountain_defense
				duration = -1
			}
			custom_tooltip = HLV_FORTS
		}
	}
}